local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local function getCharacter()
    return LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
end

-- Dash ve Swing butonlarƒ±
local DashButton = PlayerGui.GAMEPLAYBUTTONS.MobileButtonHolder.Dash_Button.ButtonFrame.ImageButton
local SwingButton = PlayerGui.GAMEPLAYBUTTONS.MobileButtonHolder.Swing_Button.ButtonFrame.ImageButton

-- Workspace i√ßinde BallShadow arama
local function findBallShadow()
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Name == "BallShadow" then
            return obj
        end
    end
    return nil
end

local running = false
local enabled = true
local connection

-- Kod √ßalƒ±≈ütƒ±ƒüƒ±nda bir kez bildirim
StarterGui:SetCore("SendNotification", {
    Title = "üê∏ Made by Peace",
    Text = "Click Dash And Shot",
    Duration = 3
})

-- UI olu≈ütur
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "InvisUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local button = Instance.new("TextButton")
button.Name = "InvisButton"
button.Parent = screenGui
button.Size = UDim2.new(0, 120, 0, 40)
button.Position = UDim2.new(0, 10, 0, 10)
button.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
button.Text = "ƒ∞nvis OFF"
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.GothamBold
button.TextSize = 18
button.AutoButtonColor = false
button.BackgroundTransparency = 0.2
button.BorderSizePixel = 0

-- UICorner ve UIStroke
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = button

local stroke = Instance.new("UIStroke")
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(0, 170, 255)
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke.Parent = button

-- Hover efektleri
button.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(button, TweenInfo.new(0.25), {BackgroundColor3 = Color3.fromRGB(0, 170, 255)}):Play()
end)

button.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(button, TweenInfo.new(0.25), {BackgroundColor3 = Color3.fromRGB(20, 20, 20)}):Play()
end)

-- Mobil ve mouse i√ßin s√ºr√ºkleme
local dragging = false
local dragInput, dragStart, startPos

button.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = button.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

button.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                    startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- UI toggle: ON/OFF
button.MouseButton1Click:Connect(function()
    enabled = not enabled
    button.Text = enabled and "ON" or "OFF"
end)

-- Dash tƒ±klandƒ±ƒüƒ±nda ƒ±≈üƒ±nlamayƒ± ba≈ülat
DashButton.MouseButton1Click:Connect(function()
    if not enabled or running then return end
    running = true

    connection = RunService.Heartbeat:Connect(function()
        local Character = getCharacter()
        local HRP = Character:WaitForChild("HumanoidRootPart")
        local targetPart = findBallShadow()
        if targetPart then
            HRP.CFrame = targetPart.CFrame + Vector3.new(0, 8, 0)
        end
    end)
end)

-- Swing tƒ±klandƒ±ƒüƒ±nda durdur
SwingButton.MouseButton1Click:Connect(function()
    running = false
    if connection then
        connection:Disconnect()
        connection = nil
    end
end)
